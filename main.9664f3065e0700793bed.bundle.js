(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FileItem}));var _fileTypeToFaIcon,helpers_extends=__webpack_require__(25),extends_default=__webpack_require__.n(helpers_extends),react=__webpack_require__(0),react_default=__webpack_require__.n(react),prop_types=__webpack_require__(3),prop_types_default=__webpack_require__.n(prop_types),airbnb_prop_types=__webpack_require__(298),index_es=__webpack_require__(76),free_solid_svg_icons_index_es=__webpack_require__(19),slicedToArray=(__webpack_require__(23),__webpack_require__(38),__webpack_require__(39),__webpack_require__(18),__webpack_require__(97),__webpack_require__(29),__webpack_require__(64),__webpack_require__(122),__webpack_require__(49),__webpack_require__(30),__webpack_require__(95),__webpack_require__(175),__webpack_require__(31),__webpack_require__(65),__webpack_require__(185),__webpack_require__(44),__webpack_require__(295),__webpack_require__(296),__webpack_require__(41),__webpack_require__(22),__webpack_require__(42),__webpack_require__(58),__webpack_require__(123),__webpack_require__(32),__webpack_require__(188),__webpack_require__(33),__webpack_require__(43),__webpack_require__(299)),slicedToArray_default=__webpack_require__.n(slicedToArray),defineProperty=__webpack_require__(9),defineProperty_default=__webpack_require__.n(defineProperty);function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var _colourMap,microsoftFiles=["word","powerpoint","excel"],fileTypeList=["video","pdf","text","image","other"].concat(microsoftFiles),fileTypes=fileTypeList.reduce((function(obj,fileType){return _objectSpread(_objectSpread({},obj),{},defineProperty_default()({},fileType,fileType))}),{}),fileTypeToFaIcon=(_fileTypeToFaIcon={},defineProperty_default()(_fileTypeToFaIcon,fileTypes.word,free_solid_svg_icons_index_es.i),defineProperty_default()(_fileTypeToFaIcon,fileTypes.powerpoint,free_solid_svg_icons_index_es.g),defineProperty_default()(_fileTypeToFaIcon,fileTypes.excel,free_solid_svg_icons_index_es.d),defineProperty_default()(_fileTypeToFaIcon,fileTypes.pdf,free_solid_svg_icons_index_es.f),defineProperty_default()(_fileTypeToFaIcon,fileTypes.image,free_solid_svg_icons_index_es.e),defineProperty_default()(_fileTypeToFaIcon,fileTypes.other,free_solid_svg_icons_index_es.b),defineProperty_default()(_fileTypeToFaIcon,fileTypes.video,free_solid_svg_icons_index_es.h),defineProperty_default()(_fileTypeToFaIcon,fileTypes.text,free_solid_svg_icons_index_es.c),_fileTypeToFaIcon),objectWithoutProperties=__webpack_require__(75),objectWithoutProperties_default=__webpack_require__.n(objectWithoutProperties),taggedTemplateLiteral=__webpack_require__(101),taggedTemplateLiteral_default=__webpack_require__.n(taggedTemplateLiteral),styled_components_browser_esm=__webpack_require__(102);function _templateObject4(){var data=taggedTemplateLiteral_default()(["\n\tleft: 0.2em;\n\tcolor: red;\n\t&:hover,\n\t&:focus {\n\t\tcolor: darkred;\n\t}\n"]);return _templateObject4=function(){return data},data}function _templateObject3(){var data=taggedTemplateLiteral_default()(["\n\tleft: 1.4em;\n\tcolor: green;\n\n\t&:hover,\n\t&:focus {\n\t\tcolor: darkgreen;\n\t}\n"]);return _templateObject3=function(){return data},data}function _templateObject2(){var data=taggedTemplateLiteral_default()(["\n\tfont-size: 4em;\n\tmargin-left: auto;\n\tmargin-right: auto;\n\tmargin-bottom: 3px;\n\tdisplay: block;\n\tcolor: ",";\n"]);return _templateObject2=function(){return data},data}function _templateObject(){var data=taggedTemplateLiteral_default()(["\n\twidth: 12ch;\n\tposition: relative;\n\ttext-align: center;\n\tdisplay: inline-block;\n\tvertical-align: top;\n\tmargin-left: 0.5em;\n\tmargin-right: 0.5em;\n\n\tdiv {\n\t\tmargin: 0;\n\t\toverflow-wrap: break-word;\n\t\tline-height: 1em;\n\t\tmax-height: 3em;\n\t\toverflow: hidden;\n\t}\n\n\t&:hover,\n\t&:focus {\n\t\tbutton {\n\t\t\topacity: 1;\n\t\t}\n\t}\n\n\tprogress {\n\t\twidth: 12ch;\n\t}\n\n\tbutton {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tfont-size: 1.4em;\n\t\tdisplay: block;\n\t\tborder: none;\n\t\tbackground: none;\n\t\topacity: 0;\n\n\t\t&:focus {\n\t\t\topacity: 1;\n\t\t}\n\n\t\t&:hover {\n\t\t\tcursor: pointer;\n\t\t}\n\t}\n"]);return _templateObject=function(){return data},data}var colourMap=(_colourMap={},defineProperty_default()(_colourMap,fileTypes.word,"#2a347d"),defineProperty_default()(_colourMap,fileTypes.powerpoint,"#c66035"),defineProperty_default()(_colourMap,fileTypes.excel,"#30703a"),defineProperty_default()(_colourMap,fileTypes.pdf,"#ca433c"),defineProperty_default()(_colourMap,fileTypes.image,"#6be8de"),defineProperty_default()(_colourMap,fileTypes.other,"#f7c46c"),defineProperty_default()(_colourMap,fileTypes.video,"#602976"),defineProperty_default()(_colourMap,fileTypes.text,"#000"),_colourMap),FileItemLi=styled_components_browser_esm.a.li(_templateObject()),StyledFaIcon=Object(styled_components_browser_esm.a)((function(_ref){_ref.iconColor;var rest=objectWithoutProperties_default()(_ref,["iconColor"]);return react_default.a.createElement(index_es.a,rest)}))(_templateObject2(),(function(props){return colourMap[props.iconColor]})),DownloadButton=styled_components_browser_esm.a.button(_templateObject3()),DeleteButton=styled_components_browser_esm.a.button(_templateObject4()),FileItem_ref=react_default.a.createElement(index_es.a,{icon:free_solid_svg_icons_index_es.a}),_ref2=react_default.a.createElement(index_es.a,{icon:free_solid_svg_icons_index_es.a}),_ref3=react_default.a.createElement(index_es.a,{icon:free_solid_svg_icons_index_es.j});function FileItem(props){var fileType=function(){var mimeType=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",_mimeType$split=mimeType.split("/"),_mimeType$split2=slicedToArray_default()(_mimeType$split,2),type=_mimeType$split2[0],subtype=_mimeType$split2[1];if(fileTypeList.includes(type))return type;if("application"===type){if(subtype===fileTypes.pdf)return fileTypes.pdf;var file,_step,_iterator=_createForOfIteratorHelper(microsoftFiles);try{for(_iterator.s();!(_step=_iterator.n()).done;)if(file=_step.value,subtype.includes(file))return file}catch(err){_iterator.e(err)}finally{_iterator.f()}}return fileTypes.other}(props.mimeType),icon=fileTypeToFaIcon[fileType];return react_default.a.createElement(FileItemLi,extends_default()({ref:props.dragProps.innerRef},props.dragProps.draggableProps,props.dragProps.dragHandleProps),react_default.a.createElement(StyledFaIcon,{icon:icon,iconColor:fileType}),!props.inProgress&&"string"==typeof props.downloadFile&&react_default.a.createElement(DownloadButton,{as:"a",href:props.downloadFile,"aria-label":"Download File"},FileItem_ref),!props.inProgress&&"function"==typeof props.downloadFile&&react_default.a.createElement(DownloadButton,{onClick:props.downloadFile,"aria-label":"Download File"},_ref2),react_default.a.createElement(DeleteButton,{onClick:props.removeFile,"aria-label":"Remove File"},_ref3),react_default.a.createElement("div",null,props.fileName),props.inProgress&&react_default.a.createElement("progress",{role:"progressbar",value:props.progress,max:100}))}FileItem.displayName="FileItem",FileItem.defaultProps={dragProps:{}},FileItem.propTypes=Object(airbnb_prop_types.forbidExtraProps)({fileName:prop_types_default.a.string.isRequired,progress:prop_types_default.a.number.isRequired,removeFile:prop_types_default.a.func.isRequired,downloadFile:prop_types_default.a.oneOfType([prop_types_default.a.func,prop_types_default.a.string]),inProgress:prop_types_default.a.bool,mimeType:prop_types_default.a.string,dragProps:prop_types_default.a.object}),FileItem.__docgenInfo={description:"",methods:[],displayName:"FileItem",props:{dragProps:{defaultValue:{value:"{}",computed:!1},required:!1}},composes:["airbnb-prop-types"]},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/FileItem.js"]={name:"FileItem",docgenInfo:FileItem.__docgenInfo,path:"src/FileItem.js"})},303:function(module,exports,__webpack_require__){__webpack_require__(304),__webpack_require__(449),module.exports=__webpack_require__(450)},368:function(module,exports){},450:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(297);module._StorybookPreserveDecorators=!0,Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(629)],module)}.call(this,__webpack_require__(451)(module))},629:function(module,exports,__webpack_require__){var map={"./FileItem.stories.js":630,"./useFilesField.stories.js":650};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=629},630:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"FileItemStory",(function(){return FileItemStory}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(79),_src_FileItem__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(100);__webpack_exports__.default={title:"File Item",component:_src_FileItem__WEBPACK_IMPORTED_MODULE_2__.a,decorators:[_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_1__.withKnobs]};var FileItemStory=function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src_FileItem__WEBPACK_IMPORTED_MODULE_2__.a,{fileName:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_1__.text)("File Name","Example"),downloadFile:function downloadFile(){},progress:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_1__.number)("progress",50,{range:!0,min:0,max:100,step:1}),mimeType:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_1__.text)("MIME","video/something"),inProgress:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_1__.boolean)("uploaded",!0)})};FileItemStory.displayName="FileItemStory",FileItemStory.__docgenInfo={description:"",methods:[],displayName:"FileItemStory"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/FileItem.stories.js"]={name:"FileItemStory",docgenInfo:FileItemStory.__docgenInfo,path:"stories/FileItem.stories.js"})},650:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"FileList",(function(){return FileList}));var react=__webpack_require__(0),react_default=__webpack_require__.n(react),FileItem=__webpack_require__(100),defineProperty=(__webpack_require__(23),__webpack_require__(97),__webpack_require__(29),__webpack_require__(64),__webpack_require__(122),__webpack_require__(95),__webpack_require__(65),__webpack_require__(185),__webpack_require__(44),__webpack_require__(295),__webpack_require__(296),__webpack_require__(41),__webpack_require__(123),__webpack_require__(32),__webpack_require__(33),__webpack_require__(9)),defineProperty_default=__webpack_require__.n(defineProperty),objectWithoutProperties=__webpack_require__(75),objectWithoutProperties_default=__webpack_require__.n(objectWithoutProperties),react_final_form_arrays_es=__webpack_require__(136),addVersionToFilename=(__webpack_require__(18),__webpack_require__(648),__webpack_require__(42),__webpack_require__(188),function(filename,version){var name=filename.substring(0,filename.lastIndexOf(".")),extension=filename.split(".").pop();return"".concat(name,"(").concat(version,").").concat(extension)});function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var src_useFilesField=function(name,onFileLoad){var config=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},multiple=config.multiple,accepts=config.accepts,fieldConfig=objectWithoutProperties_default()(config,["multiple","accepts"]),inputRef=Object(react.useRef)(null),_useFieldArray=Object(react_final_form_arrays_es.b)(name,_objectSpread({getItemName:function getItemName(v){return v}},fieldConfig)),meta=_useFieldArray.meta,fields=_useFieldArray.fields;return{inputProps:{ref:inputRef,hidden:!0,multiple:multiple,accepts:accepts,type:"file",onChange:function onChange(_ref){var target=_ref.target,nameList=meta.data.NAME_LIST;Array.from(target.files).forEach((function(file){var filename=file.name;if(nameList.includes(filename)){var count=nameList.reduce((function(n,val){return n+(val===file.name)}),0);filename=addVersionToFilename(filename,count)}onFileLoad({file:file,filename:filename,addFile:function addFile(value){return fields.push(value,filename)},removeFile:function removeFile(){return fields.remove(filename)},updateFile:function updateFile(value){return fields.update(filename,value)}})}))}},files:fields,meta:meta,uploadFiles:function uploadFiles(){inputRef.current.click()}}},helpers_extends=__webpack_require__(25),extends_default=__webpack_require__.n(helpers_extends),react_final_form_es=__webpack_require__(78),FormTemplate=function(props){props.onSubmit;var otherProps=objectWithoutProperties_default()(props,["onSubmit"]);return react_default.a.createElement(react_final_form_es.a,extends_default()({onSubmit:props.onSubmit||function(){},mutators:react_final_form_arrays_es.a,render:function render(_ref){var handleSubmit=_ref.handleSubmit;return react_default.a.createElement("form",{onSubmit:handleSubmit},props.children)}},otherProps))};FormTemplate.displayName="FormTemplate",FormTemplate.__docgenInfo={description:"",methods:[],displayName:"FormTemplate"};var src_FormTemplate=FormTemplate;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/FormTemplate.js"]={name:"FormTemplate",docgenInfo:FormTemplate.__docgenInfo,path:"src/FormTemplate.js"});__webpack_exports__.default={title:"Example using hooks"};var onFileAdd=function(_ref){var file=_ref.file,filename=_ref.filename;(0,_ref.addFile)({mime:file.type,filename:filename})},Example=function(){var _useFilesField=src_useFilesField("files",onFileAdd,{multiple:!0}),uploadFiles=_useFilesField.uploadFiles,inputProps=_useFilesField.inputProps,files=_useFilesField.files;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("input",inputProps),react_default.a.createElement("button",{onClick:uploadFiles},"Load files"),react_default.a.createElement("ul",null,files.mapValues((function(file){return react_default.a.createElement(FileItem.a,{fileName:file.filename,mimeType:file.mime,downloadFile:function downloadFile(){},removeFile:function removeFile(){files.remove(file.filename)}})}))))},_ref2=react_default.a.createElement(src_FormTemplate,null,react_default.a.createElement(Example,null)),FileList=function(){return _ref2};FileList.displayName="FileList",FileList.__docgenInfo={description:"",methods:[],displayName:"FileList"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/useFilesField.stories.js"]={name:"FileList",docgenInfo:FileList.__docgenInfo,path:"stories/useFilesField.stories.js"})}},[[303,1,2]]]);
//# sourceMappingURL=main.9664f3065e0700793bed.bundle.js.map